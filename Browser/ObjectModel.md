# 💡 DOM & CSSOM & BOM & Virtual DOM

> DOM이란 무엇인가?

- DOM은 HTML 문서를 브라우저에서 잘 동작할 수 있도록 설계된 객체가 바로 DOM이다.
- 만약 브라우저가 공장이라고 가정해보자. 공장에 물품을 주문해야지 주문에 맞는 물품이 나올 수 있다. 이때 주문서는 HTML과 같다.
- MDN에서는 DOM을 HTML문서를 나타내는 API라고 말한다

<br/>

> DOM의 관점에서 API란 무엇인가

API는 프로그램들이 서로 상호작용하는 것을 도와주는 매개체를 의미한다 DOM의 관점에서 본 API란 HTML 문서와 브라우저가 서로 상호작용하는것을 도와주는 매개체라고 볼 수 있다.

<br/>

> 노드란 무엇인가?

DOM의 관점에서 노드란 HTML내부의 하나하나의 태그들을 의미합니다. Node들은 부모 자식 상속관계를 가지고 있어 부모 노드의 속성을 자식노드에서 상속받아 사용할 수 있다.

<br/>

> BOM이란 무엇인가

BOM은 브라우저 오브젝트 모델을 의미한다. 말그대로 브라우저에서 사용할 수 있는 각종 속성들이 모여있는 브라우저의 API이다. 예를들면 alert, navigation, history 등등이 있다.

<br/>

> CSSOM이란 무엇인가

CSSOM은 스타일과 관련된 노드들이 모여서 형성된 객체 형태이다. CSSOM은 브라우저 렌더링 과정에서 스타일과 관련된 link태그를 만나 생성되기 시작하며 DOM이 완성이 된 이후 CSSOM이 결합되어 화면에 보여질 요소들만 걸러진 후에 Render Tree로 그려진다.

<br/>

> 가상 DOM은 왜 생겼는가?

이전에 MPA방식에서는 페이지에 조그만한 변경이 일어나도 페이지 전체가 리렌더링 되는 비효율적인 방식으로 진행이 되었다. 그리고 이를 해결하기 위해서 SPA를 사용하게 되었다. 초창기에는 Jquery를 통해서 바뀔 부분에 대한 코드를 미리 적어줘야했다. 이는 엄청난 하드코딩이 필요하며 예측불허한 변경이 발생할 경우에 대처하기 힘들다는 단점이 있었다.

<br/>

> 가상 DOM은 무엇인가?

실제 돔과 다른 가상의 돔으로 실제 돔의 복사본이라고 이해하면 좋다. 가상돔은 메모리상에만 존재하며 실제 화면에는 나타나지 않는 복사본과 같다. 가상돔은 실제 돔에서 변경이 일어날 경우 변경사항을 Diffing 알고리즘을 통하여 분석한다. 변경된 부분을 파악하면 변경된 부분에 대한 업데이트를 진행한다

<br/>

> 가상 돔의 동작 원리에 대해서 설명해달라

기존 브라우저 렌더링의 순서에 따르면 자바스크립트로 DOM의 요소가 변경이 될 때마다 매번 리플로우 리페인트가 발생하여 성능 저하의 주된 요인이 되었다. 리액트의 버추어 돔은 특정 부분이 리렌더링 되어야 할 때 그 부분에 해당하는 virtual DOM 트리를 메모리에 새로 생성하고 diffing 알고리즘으로 비교하여 차이점을 파악한다 그리고 그 차이점들을 하나로 모아서 virtual DOM을 하나로 모아서 실제 DOM에게 전달해준다. 이로 인해서 실제 DOM의 리렌더링 연산은 단 한번만 일어나게 되어 큰 성능의 이득을 얻게 된다.

<br/>

# 🔗 Reference

- [https://it-eldorado.tistory.com/87](https://it-eldorado.tistory.com/87)
- [https://www.youtube.com/watch?v=1ojA5mLWts8](https://www.youtube.com/watch?v=1ojA5mLWts8)
