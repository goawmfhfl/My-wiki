# 💡SubType, SuperType

> **_왜 알고있어야하나?_**

생성자 함수를 여럿 생성하다보면 생성자 함수끼리도 중복되는 프로퍼티와 메서드가 생길 수 있다. 중복되는 동작들을은 공유하면 불필요한 동작을 반복할 필요가 없다. subType과 SuperType을 배우면 생성자함수 내부에서의 메서드와 프로토타입의 상속 관계를 명확히 이해할 수 있다.

> **_특징_**

1.  자바스크립트에서는 상속받는 타입을 하위 타입 상속하는 타입을 상위 타입 이라고 부른다.
2.  Object.create()메소드를 통해 인스턴스의[[prototype]]대상을 지정할 수 있다.
3.  call이나 apply를 이용하여 인스턴스를 인수로 전달하고 프로퍼티를 상속받는 방법을 생성자 훔치기 라고 한다.

> **_생성자 함수와 클래스의 차이는 무엇인가?_**

- class는 생성자 함수의 객체를 생성하는 방법을 좀 더 편리하게 사용하기 위한 문법 설탕이다. 그렇기에 문법적인 차이는 있으나 동작하는 원리는 크게 다르지 않다.
- 차이점 1 : 생성자 함수는 호이스팅이 발생하지만 클래스는 발생하지 않는다.
- 차이점 2 : class 선언 내의 모든 코드는 엄격 모드에서 작동한다.

# 🚀코드 예시

사용자가 출발지역에서 도착지역 그리고 어떤 교통을 이용할 지 결정하면 소요시간을 계산해주는 어플리케이션이 있다고 가정해보자. 생성자 함수를 통해서 사용자의 정보를 받아와 간편하게 처리할 수 있다.

```jsx
function 교통정보알리미(출발지역, 도착지역, 교통, 소요시간) {
  this.출발지역 = 출발지역;
  this.도착지역 = 도착지역;
  this.교통 = 교통;
  this.소요시간 = 소요시간;
}

교통정보알리미.prototype.예정시간 = function () {
  return `${this.출발지역}에서 ${this.도착지역}까지의 소요 예정 시간은 ${this.소요시간} 입니다 `;
};

let travler1 = new 교통정보알리미('서울', '용문', '지하철', '2시간30분');
console.log(travler1.예정시간()); // 서울에서 용문까지의 소요 예정 시간은 2시간30분 입니다

let travler2 = new 교통정보알리미('명동', '이태원', '버스', '20분');
console.log(travler2.예정시간()); // 명동에서 이태원까지의 소요 예정 시간은 20분 입니다
```

- 생성자 함수 내에서 프로토타입을 통하여 메서드가 불필요하게 중복생성 되는 것을 방지하는 법을 배웠다.

하지만 뭔가 아쉬운 점이 생겼다. 바로 아래와 같은 상황이다.

```jsx
function 이벤트쿠폰알리미(출발지역, 도착지역, 교통, 할인) {
  this.출발지역 = 출발지역;
  this.도착지역 = 도착지역;
  this.교통 = 교통;
  this.할인 = 할인;
}

이벤트쿠폰알리미.prototype.예상할인 = function () {
  return `저희 앱을 통해서 ${this.도착지역}에서 ${this.출발지역}까지 ${this.교통}을 통해가시면 ${this.할인}할인 이벤트 쿠폰을 드려요`;
};

let travler1 = new 이벤트쿠폰알리미('용문', '서울', '지하철', '50%');
console.log(travler1.예상할인()); // 저희 앱을 통해서 서울에서 용문까지 지하철을 통해가시면 50%할인 이벤트 쿠폰을 드려요

let travler2 = new 이벤트쿠폰알리미('이태원', '명동', '버스', '10%');
console.log(travler2.예상할인()); // 저희 앱을 통해서 명동에서 이태원까지 버스을 통해가시면 10%할인 이벤트 쿠폰을 드려요
```

이 어플리케이션은 교통정보 뿐만 아니라 각종 이벤트 쿠폰도 주고 있다. 대중교통 할인권을 제공해준다고 가정해보자. 이벤트 쿠폰 알리미라는 생성자 함수를 새로 생성했다.

2개의 생성자 함수에 동일한 프로퍼티가 눈에 띈다 중복되는 부분을 없애주고싶다. 이때 사용할 수 있는것이 바로 call 메서드다.

- call, apply

```jsx
// 교통 정보 알리미

function 교통정보알리미(출발지역, 도착지역, 교통, 소요시간) {
  this.출발지역 = 출발지역;
  this.도착지역 = 도착지역;
  this.교통 = 교통;
  this.소요시간 = 소요시간;
}

교통정보알리미.prototype.예정시간 = function () {
  return `${this.출발지역}에서 ${this.도착지역}까지의 소요 예정 시간은 ${this.소요시간} 입니다 `;
};

// 이벤트 쿠폰 알리미

function 이벤트쿠폰알리미(출발지역, 도착지역, 교통, 할인) {
  교통정보알리미.apply(this, [출발지역, 도착지역, 교통]);
  this.할인 = 할인;
}

이벤트쿠폰알리미.prototype.예상할인 = function () {
  return `저희 앱을 통해서 ${this.도착지역}에서 ${this.출발지역}까지 ${this.교통}을 통해가시면 ${this.할인}할인 이벤트 쿠폰을 드려요`;
};
```

`call`은 함수의 this가 어디를 가리킬지 정할 수 있었다. 객체가 어떠한 생성자의 프로토타입을 가리킬지 정할 수 있다. 이벤트 쿠폰 알리미 생성자 함수에서는 apply를 통해 this(이벤트알리미가 생성할 인스턴스)와 전달할 인수를 배열로 전달한다. 이렇게 다른 생성자 함수를 이용하여 인스턴스를 인수로 전달하고 프로퍼티를 상속받는 방법을 `생성자 훔치기(constructor stealing)`이라고 표현한다

- 프로퍼티를 상속 받는 타입은 `하위 타입, 서브 타입`이라 불린다
- 프로퍼티를 상속해 주는 타입은 `상위 타입, 슈퍼 타입`이라 불린다

- Object.create()

```jsx
// 교통 정보 알리미

function 교통정보알리미(출발지역, 도착지역, 교통, 소요시간) {
  this.출발지역 = 출발지역;
  this.도착지역 = 도착지역;
  this.교통 = 교통;
  this.소요시간 = 소요시간;
}

교통정보알리미.prototype.예정시간 = function () {
  return `${this.출발지역}에서 ${this.도착지역}까지의 소요 예정 시간은 ${this.소요시간} 입니다 `;
};

// 이벤트 쿠폰 알리미

function 이벤트쿠폰알리미(출발지역, 도착지역, 교통, 할인) {
  교통정보알리미.apply(this, [출발지역, 도착지역, 교통]);
  this.할인 = 할인;
}

이벤트쿠폰알리미.prototype.예상할인 = function () {
  return `저희 앱을 통해서 ${this.도착지역}에서 ${this.출발지역}까지 ${this.교통}을 통해가시면 ${this.할인}할인 이벤트 쿠폰을 드려요`;
};

let myInfo = new 이벤트쿠폰알리미('이태원', '명동', '지하철', '20분');
console.log(myInfo.예정시간());
// Uncaught TypeError: myInfo.예정시간 is not a function
```

이벤트쿠폰알리미 생성자 함수가 생성한 인스턴스가 교통정보알리미의 프로토타입 메서드를 참조할 수 있는 방법은 없을까?

```jsx
// 교통 정보 알리미

function 교통정보알리미(출발지역, 도착지역, 교통, 소요시간) {
  this.출발지역 = 출발지역;
  this.도착지역 = 도착지역;
  this.교통 = 교통;
  this.소요시간 = 소요시간;
}

교통정보알리미.prototype.예정시간 = function () {
  return `${this.출발지역}에서 ${this.도착지역}까지의 소요 예정 시간은 ${this.소요시간} 입니다 `;
};

// 이벤트 쿠폰 알리미

function 이벤트쿠폰알리미(출발지역, 도착지역, 교통, 할인, 소요시간) {
  교통정보알리미.apply(this, [출발지역, 도착지역, 교통, 소요시간]);
  this.할인 = 할인;
}

이벤트쿠폰알리미.prototype = Object.create(교통정보알리미.prototype);

이벤트쿠폰알리미.prototype.예상할인 = function () {
  return `저희 앱을 통해서 ${this.도착지역}에서 ${this.출발지역}까지 ${this.교통}을 통해가시면 ${this.할인}할인 이벤트 쿠폰을 드려요`;
};

let myInfo = new 이벤트쿠폰알리미(
  '이태원',
  '명동',
  '지하철',
  '예상시간',
  '20분',
);

console.log(myInfo.예정시간());
console.log(myInfo.예상할인());
```

`Object.Create()` 메소드는 `[[prototype]]`이 참조할 생성자의 prototype 프로퍼티를 설정한다
즉 이벤트쿠폰알리미의 상위 프로토타입을 무엇으로 정할지 Object.create를 통해서 설정할 수 있는 것이다.이로써 이벤트쿠폰알리미가 생성한 인스턴스는 교통정보알리미 생성자 함수에서 생성한 예정시간 메서드를 사용할 수 있게 된다
